# MarketLens 项目升级执行计划 - 阶段三：先进功能拓展

## 阶段目标
实现宏观图谱仪，融入因果推理和仿真能力，构建最先进的知识图谱系统。

## 具体执行计划

### 1. 事件-事件效应图谱

#### 1.1 因果网络构建
  - 构建有向加权网络，节点为事件类型（EventCode）
  - 设计边的因果关系表示方法
  - 实现网络可视化功能
  - 开发网络分析工具

#### 1.2 因果发现算法集成
  - 集成 PC 算法（causal-learn 库）
  - 从时序关联中识别真实因果关系
  - 实现权重量化（强度/概率/滞后）
  - 开发因果关系验证机制

#### 1.3 因果查询接口
  - 实现"A事件引发B事件的概率"查询接口
  - 开发因果链追踪功能
  - 构建因果关系解释模块
  - 优化查询性能

### 2. 社区图谱

#### 2.1 社区检测算法实现
  - 应用 Louvain 算法（networkx.community）
  - 检测实体簇（如利益集团）
  - 实现社区可视化
  - 开发社区分析工具

#### 2.2 超实体建模
  - 将社区作为超实体进行建模
  - 计算社区属性（如整体 AvgTone）
  - 实现超实体查询接口
  - 开发社区演化分析

#### 2.3 GDELT 数据应用
  - 在 GDELT 数据中识别"观点阵营"
  - 发现"区域联盟"模式
  - 实现阵营对比分析
  - 开发联盟演化追踪

### 3. 事件发展效应混合图谱

#### 3.1 动态仿真引擎开发
  - 开发动态仿真引擎
  - 输入事件流（GDELT 序列）
  - 驱动实体网络变化
  - 实现仿真结果可视化

#### 3.2 仿真规则设计
  - 设计 simulation 循环迭代规则
  - 实现 EventCode=190 冲突更新关系规则
  - 开发规则配置管理
  - 验证规则有效性

#### 3.3 世界演变模拟
  - 模拟"事件流下的世界演变"
  - 实现多维度演变分析
  - 开发演变趋势预测
  - 构建演变对比工具

### 4. 反事件效应图谱

#### 4.1 反事实推理框架集成
  - 集成 dowhy 库进行反事实推理
  - 实现历史事件干预功能
  - 开发对比路径量化模块
  - 构建反事实分析接口

#### 4.2 反事实查询功能
  - 实现"如果没有发生X，结果如何？"查询功能
  - 开发干预效果评估
  - 构建反事实场景比较
  - 优化查询响应时间

#### 4.3 模型校准与验证
  - 实现模型校准机制
  - 确保反事实推理稳健性
  - 开发模型验证工具
  - 建立准确性评估体系

### 5. 技术增强

#### 5.1 GraphRAG 与 KGE 集成
  - 结合 GraphRAG 技术提升推理准确性
  - 集成 KGE（Knowledge Graph Embedding）技术
  - 优化推理算法性能
  - 开发混合推理接口

#### 5.2 多模态扩展
  - 整合 GDELT 的图像/视频链接
  - 使用 CLIP 抽取视觉实体
  - 实现多模态融合分析
  - 开发多媒体内容处理

## 里程碑交付物
1. 事件-事件效应图谱系统
2. 社区图谱分析工具
3. 动态仿真引擎
4. 反事实推理系统
5. 多模态分析能力

## 风险评估与应对措施
- **算法复杂性**: 分阶段实现，先实现基础功能再逐步优化
- **计算资源**: 使用分布式计算和缓存机制优化性能
- **准确性保障**: 结合领域专家知识和人工验证机制

## 资源需求
- 云资源: 高性能计算实例和GPU资源
- 第三方服务: causal-learn、dowhy、CLIP模型访问权限