# AI市场分析智能体

基于全球市场数据和新闻资讯构建的可解释市场分析系统，用于市场推演和投机需求。

## 项目概述

该项目旨在构建一个基于知识图谱的市场分析智能体，能够：
1. 接入全球新闻资讯和市场数据API
2. 构建市场知识图谱，整合市场数据和新闻事件
3. 提供可解释的市场分析和推理
4. 支持多种数据来源和分析模型

### 核心功能

|功能|状态| 
|---|:---:| 
|全球新闻资讯和市场数据API接入|&#x2705;| 
|构建市场知识图谱|&#x274C;| 
|知识图谱驱动的市场分析|&#x274C;| 
|可解释的分析结果输出|&#x274C;| 
|多渠道结果推送（邮箱、微信）|&#x274C;| 

## 知识图谱构建

### 智能体流水线设计

|阶段|功能|状态|
|---|---|:---:|
|实体提取|从新闻中提取市场相关实体|&#x2705;|
|新闻拓展|使用提取的实体获取更多相关新闻|&#x2705;|
|图谱构建|构建实体-事件-市场影响的知识图谱|&#x274C;|
|市场分析|基于知识图谱进行市场预期分析|&#x274C;|
|可视化|知识图谱和分析结果可视化|&#x274C;|

##### 知识图谱技术细节

1. 多源数据接入
- 从新闻、行情、公开企业信息等渠道收集原始数据
- 用简单脚本或轻量流处理（如 Python + Redis / Kafka）做初步清洗和去重

2. 图谱构建方式
- 提取新闻中的实体、事件抽象、实体与事件抽象的映射
- 通过规则或 NLP 模型（如 spaCy、LTP、BERT）扩展实体和事件抽象
- 图谱存储暂用 JSON 或 SQLite，后期可迁移到 Neo4j 等图数据库。

3. 智能体协作流程 
- 从新闻中抽取出实体 → 用这些实体去检索更多相关新闻 → 聚合事件 → 构建“实体-事件”关联 → 推导市场影响

4. 输出与验证
- 最终目标是生成可解释的推导链,这个推导链可以覆盖到所有市场和所有领域
- 所有预测会记录并回溯验证，避免模型幻觉

> 💡 注：所有组件设计为松耦合，技术选型可根据实际资源调整（例如不用 Flink、不用 OneKE、不用 Prophet），优先保证可运行和可维护

## 项目结构

    System/
    ├── main.py                   # 主程序入口
    ├── fatch_data.py             # 历史数据获取脚本
    ├── .gitignore
    ├── LICENSE
    ├── README.md                 # 项目说明文档
    ├── config/                   # 配置文件目录
    │   ├── .env                  # 环境变量配置
    │   └── config.yaml           # 主配置文件
    ├── data/                     # 数据文件目录
    │   ├── deduped_news/         # 去重新闻数据目录
    │   ├── logs/                 # 日志
    │   ├── raw_news/             # 临时新闻数据目录
    │   ├── entities.json         # 实体库
    │   ├── processed_ids         # 新闻索引表
    │   └── stop_words.txt        # 停用词列表
    ├── models/                   # 模型文件目录
    │   ├── data/                 # 训练数据目录
    │   ├── pth/                  # 训练模型缓存目录
    │   ├── explainable_model.py  # 可解释模型实现
    │   ├── example.py            # 模型示例代码
    │   └── explainable_market_model.pt  # 示例模型文件
    └── src/                      # 源代码目录
        ├── __init__.py
        ├── agents/               # 智能体模块
        │   ├── agent1.py         # 实体提取智能体
        │   └── market_analysis_agent.py  # 市场分析智能体
        ├── analysis/             # 分析模块
        │   └── technical_calculator.py # 技术指标计算器
        ├── config/               # 配置管理
        │   └── config_manager.py # 配置管理器
        ├── data/                 # 数据模块
        │   ├── data_collector.py # 市场数据收集器
        │   ├── news_collector.py # 新闻收集器
        │   ├── RESTful-API-main/ # 新闻API文档
        │   └── websocket_collector.py # WebSocket实时数据
        ├── models/               # 模型管理
        │   └── model_loader.py   # 模型加载器
        └── utils/                # 工具模块
            └── validators.py     # 验证工具（当前为空）


## 可解释模型

该项目采用可解释的市场分析模型，避免传统黑盒模型的局限性：

- 基于知识图谱的推理过程可追溯
- 分析结果提供明确的因果关系
- 支持多源数据的融合分析
- 结果可验证和回溯

## 运行说明

### 环境配置

1. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```

2. 配置文件：
   - 修改 `config/config.yaml` 配置数据源和分析参数
   - 设置环境变量（如API密钥）

3. 运行主程序：
   ```bash
   python main.py
   ```

## 贡献

欢迎提交Issue和Pull Request！

## 许可证

[Apache License 2.0](LICENSE)
